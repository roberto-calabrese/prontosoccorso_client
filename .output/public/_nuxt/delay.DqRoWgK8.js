import{av as l,aN as c,p as u,$ as y}from"./entry.CsEeI3UP.js";const d=l("core",{state:()=>({isLoading:!1,snackbars:[]}),actions:{setLoading(e){this.isLoading=e},openSnackbar(e,o="info"){this.snackbars.push({text:e,color:o,active:!0})},closeSnackbar(e){this.snackbars.splice(e,1)}}});async function D(e){const a=c().public.apiBaseUrl,s=d();try{return s.setLoading(!0),await $fetch(`${a}/${e}`)}catch{s.openSnackbar(`Errore durante il fetch dei dati: ${e}`,"red")}finally{setTimeout(()=>{s.setLoading(!1)},1e3)}}const p=u({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function m(e,o){const a={},s=n=>()=>{if(!y)return Promise.resolve(!0);const t=n==="openDelay";return a.closeDelay&&window.clearTimeout(a.closeDelay),delete a.closeDelay,a.openDelay&&window.clearTimeout(a.openDelay),delete a.openDelay,new Promise(r=>{const i=parseInt(e[n]??0,10);a[n]=window.setTimeout(()=>{o==null||o(t),r(t)},i)})};return{runCloseDelay:s("closeDelay"),runOpenDelay:s("openDelay")}}export{d as a,D as f,p as m,m as u};
